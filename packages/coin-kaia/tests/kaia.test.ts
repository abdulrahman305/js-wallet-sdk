import {EthTxParams, KaiaWallet} from "../src";
import {AccountKeyType, TxType} from "@kaiachain/js-ext-core";
import {base} from "@okxweb3/crypto-lib";

describe("kaia", () => {

    test("getDerivedPath test", async () => {
        const wallet = new KaiaWallet();
        let hdPath = await wallet.getDerivedPath({index:0})

        const mnemonic = "swift choose erupt agree fragile spider glare spawn suit they solid bus";
        let pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:hdPath})
        const expected = '0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7';
        expect(pri).toEqual(expected);
        let addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        expect(addr.publicKey).toEqual("0x0433c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f1b3ac990033c2f56fc29e391dd520f3966bb953225d829cafdf9964a487d6f46f")
        expect((await wallet.validPrivateKey({privateKey:pri})).isValid).toBe(true);
        expect((await wallet.validAddress({address:addr.address})).isValid).toBe(true);

        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:1})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:2})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x02D643F38C7C21b4dd24e8C17d0fe73ded55e6F4")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:3})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0xb9839C16c2a00E3ACe0b6a4123Dd783B730A1a8C")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:4})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x523584Bfb2237B1e61C2d6250f43A209C503a6ea")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:5})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x0DE7DA9Ae2EDc880Fc1963b3a3B7216EcF2d0FAA")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:6})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0xFe33a9C90e1bF2Af2DDb91282F5374D04126AB12")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:7})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x0799474241A7936051C2117600D3ACEB289ae7a6")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:8})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x4E656B9a485e4C44B647a02fD5E314d37556ad92")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:9})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0xfe9616D93AcA9751A41B736573BE2822625db2F3")
        pri = await wallet.getDerivedPrivateKey({mnemonic:mnemonic, hdPath:await wallet.getDerivedPath({index:10})})
        addr = await wallet.getNewAddress({privateKey:pri})
        expect(addr.address).toEqual("0x373f58c1a895af078D65cEC77cd34C1D2682F20D")
    })

    test("signCommonMsg", async () => {
        let wallet = new KaiaWallet();
        let sig = await wallet.signCommonMsg({privateKey:"0743bf0e3864122edff9f143006f0a0d61b16df3f676c8070dac1d0f42d78353", message:{walletId:"123456789"}});
        expect(sig).toEqual("1b5a5bab2a414547358a95e63bfd4e7564831042bf57aa0303b072eec543aa1d4b51afb5c6f9889edb3dd6a50e8c957b296731021ba822819573d21093a8c06e46")
        sig = await wallet.signCommonMsg({privateKey:"0743bf0e3864122edff9f143006f0a0d61b16df3f676c8070dac1d0f42d78353", message:{text:"123456789"}});
        expect(sig).toEqual("1bfb5fcdb8b7102c2f142718aec10f30cd0ea0d84cd7b51dac1e8e8565ead520a72ad1b75d1a7f412b05f821f5ccc694452e838f2022ccc3d5edefb9eda7cd7e8d")
        sig = await wallet.signCommonMsg({privateKey:"0xc20b289a5aef813a3767cbe601ef8a059e0c79fec117fd9cb1190676e5af1f1a", message:{text:"ed25519:G6mk3vRxgjFA4gjHDaNvxqdpofgkrkon6LqhsnLgmRVB"}});
        expect(sig).toEqual("1bf6a3ec2cb2db1850acf1a4e4c736f559f016d19ab0db6690e679a9eddb20a98c5ea9dcdb4110823d079de1ac65ea14f2adc00ebe8db4cbdb6bf2191833b56011")
    });

    test("signTransaction test eth transfer", async () => {
        const wallet = new KaiaWallet();
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                chainId:1001,
                nonce:0,
                to: "0x37Fb996d96633C5BCF526f3dc198285C9Dac846f",
                value: "1234",
                gasLimit:2000000,
                gasPrice:27500000000,
            }
        })
        expect(senderTx).toEqual("0xf8698085066720b300831e84809437fb996d96633c5bcf526f3dc198285c9dac846f8204d2808207f5a00603fc96de9c42e014015f1160a970e9552af19d55ecf9f68b5bcf6a4566000ba05e504f4e077b33972e865c592fd604127871c436d3a90eeff60389fecb289c49")
    })

    test("signTransaction test eth transfer eip1559", async () => {
        const wallet = new KaiaWallet();
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                type:2,
                chainId:1001,
                nonce:2,
                to: "0x37Fb996d96633C5BCF526f3dc198285C9Dac846f",
                value: "1234",
                gasLimit:2000000,
                maxPriorityFeePerGas: 27500000000,
                maxFeePerGas: 37500000000,
            }
        })
        expect(senderTx).toEqual("0x02f8718203e90285066720b3008508bb2c9700831e84809437fb996d96633c5bcf526f3dc198285c9dac846f8204d280c080a002786d5dca0944376eb7f3fc79951156c5cc88dfb0a90ad5ecb375634c94180ea077cc42962daa45c3161863f2e4bc4fbf7166878ae5f2473a05bb39e59899e6ef")
    })

    test("signTransaction test eth invoke contract", async () => {
        const wallet = new KaiaWallet();
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        // 0x37Fb996d96633C5BCF526f3dc198285C9Dac846f
        let senderTx= await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                chainId:1001,
                nonce:1,
                to: "0x36F454B5E61a1ED0886784feB6D1e9bFf616d7b4",
                data:"0xa0712d68000000000000000000000000000000000000000000000000000000000001e240",
                value: "0",
                gasLimit:2000000,
                gasPrice:27500000000,
            }
        })
        expect(senderTx).toEqual("0xf88b0185066720b300831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b480a4a0712d68000000000000000000000000000000000000000000000000000000000001e2408207f5a076a05bec007771bd51c24c400377692d53d41b5cc9c7432e8ec5264e593cbff6a05247b94e441236358c658086dd1949f27734284f9943b3dd77ad88ec3040e60e")
    })

    test("signTransaction test eth invoke contract eip1559", async () => {
        const wallet = new KaiaWallet();
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        // 0x37Fb996d96633C5BCF526f3dc198285C9Dac846f
        let senderTx= await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                type:2,
                chainId:1001,
                nonce:3,
                to: "0x36F454B5E61a1ED0886784feB6D1e9bFf616d7b4",
                data:"0xa0712d68000000000000000000000000000000000000000000000000000000000001e240",
                value: "0",
                gasLimit:2000000,
                maxPriorityFeePerGas: 27500000000,
                maxFeePerGas: 37500000000,
            }
        })
        expect(senderTx).toEqual("0x02f8938203e90385066720b3008508bb2c9700831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b480a4a0712d68000000000000000000000000000000000000000000000000000000000001e240c001a014959d1e78135cbf0afed27b2ab97cb03e15cf756b8df4d40d0be967da7364fea006274bbde5a54a1a8c8dc8dda1f08f4d79ab2a0d1b10f0f0d61601e516c5b754")
    })

    test("signTransaction test FeeDelegatedValueTransfer", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransfer,
                chainId:1001,
                from: sender.address,
                nonce:1,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                value: "1234",
                gasLimit:2000000,
                gasPrice:27500000000,
            }
        })
        expect(senderTx).toEqual("0x09f8810185066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625faf847f8458207f5a0f03915b2d690917643dc53861f8ee8df43c8a2d82b1aa62c93e4fc111dab9c6aa078f6fdff875669febd23d842f4907d48d721575c0537c4081aaf1f12290b4579")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x09f8df0185066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625faf847f8458207f5a0f03915b2d690917643dc53861f8ee8df43c8a2d82b1aa62c93e4fc111dab9c6aa078f6fdff875669febd23d842f4907d48d721575c0537c4081aaf1f12290b45799437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f6a07ac58f030f7fb9518504280ea2590960eb3f71b724cc753ed5a3ef5069a80b40a07edd596f7514a4442ddeec0f2671bb1ab7addb55db69342cb66d29c36c09128a")
    })


    test("signTransaction test FeeDelegatedValueTransfer exp", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        await expect(wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransfer,
                chainId:1001,
                from: sender.address,
                nonce:1,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                value: "1234",
                gasLimit:2000000,
            }
        })).rejects.toEqual("sign tx error")
        await expect(wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransfer,
                chainId:1001,
                from: sender.address,
                nonce:1,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                value: "1234",
                gasPrice:2000000,
            }
        })).rejects.toEqual("sign tx error")

    })

    test("signTransaction test FeeDelegatedCancelWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedCancelWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:19,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                gasLimit:2000000,
                gasPrice:32500000000,
                feeRatio:50,
            }
        })
        expect(senderTx).toEqual("0x3af86a1385079126a500831e84809469c8c960bc3963be9df92e26206304d647b625fa32f847f8458207f5a0fb31c4d3d4419150d6eee912ab5743fe10a3fa02048b56bc03dd430e90f2ccc4a049693a51e8578a692cbdd022c76e52c0cb3ad0da25d47b952526cf41d570e6d0")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x3af8c81385079126a500831e84809469c8c960bc3963be9df92e26206304d647b625fa32f847f8458207f5a0fb31c4d3d4419150d6eee912ab5743fe10a3fa02048b56bc03dd430e90f2ccc4a049693a51e8578a692cbdd022c76e52c0cb3ad0da25d47b952526cf41d570e6d09437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a074bda21978729211ab0ef5b14fb51c74e8fbd696aa79ea02a272ba189e1d211fa03bff9cebb29ba9dfe4a114a003821506fd22e40d098169d3432c2d1cc1b4800f")
    })
    test("signTransaction test FeeDelegatedCancel", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedCancel,
                chainId:1001,
                from: sender.address,
                nonce:17,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                gasLimit:2000000,
                gasPrice:32500000000,
                feeRatio:50,
            }
        })

        expect(senderTx).toEqual("0x39f8691185079126a500831e84809469c8c960bc3963be9df92e26206304d647b625faf847f8458207f6a0fcd151b638a0613e9c7d0792b5264c454451e5e217c8fc3478e82fa59f3bb294a0766be25cef45e3f82f64d45127d29404f2409ff41387210dce1c32a2671ab04d")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x39f8c71185079126a500831e84809469c8c960bc3963be9df92e26206304d647b625faf847f8458207f6a0fcd151b638a0613e9c7d0792b5264c454451e5e217c8fc3478e82fa59f3bb294a0766be25cef45e3f82f64d45127d29404f2409ff41387210dce1c32a2671ab04d9437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a090c0a3457987c2d9491c1b56fde20370c5544807e4467c3969807f49e4346113a021a7f0c5a8354a46524781ab9b6038e8c7705ea2ab3c6554f75994b5b00669d0")
    })

    test("signTransaction test FeeDelegatedValueTransferMemo", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransferMemo,
                chainId:1001,
                from: sender.address,
                nonce:7,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                data:base.toHex(Buffer.from("test", "utf-8"),true),
                value: "1234",
                gasLimit:2000000,
                gasPrice:27500000000,
            }
        })
        expect(senderTx).toEqual("0x11f8860785066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa8474657374f847f8458207f5a0bbea56cdd29a816e60aeca1a84e82bb82277f4d492c745cd2a7b262bffbd51ada0500c11b9310ab7e865a6cebac1849d84eb70ef7412adc64cd87f439b484279b9")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x11f8e40785066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa8474657374f847f8458207f5a0bbea56cdd29a816e60aeca1a84e82bb82277f4d492c745cd2a7b262bffbd51ada0500c11b9310ab7e865a6cebac1849d84eb70ef7412adc64cd87f439b484279b99437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f6a0b275618acf46875958c090ffe317c7c4e5e5a873a930788a6b239f4f58ee43f8a0406b016b189781c1b63998b0cc3036b36672628a3826b04d10923e108f5555b5")
    })

    test("signTransaction test FeeDelegatedValueTransferMemoWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransferMemoWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:8,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                data:base.toHex(Buffer.from("test", "utf-8"),true),
                value: "1234",
                gasLimit:2000000,
                gasPrice:27500000000,
                feeRatio:80,
            }
        })

        expect(senderTx).toEqual("0x12f8870885066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa847465737450f847f8458207f6a09aa476d7c290c0023e2b500005d31c7fda81df6fd803fd7c613539dc6e6ee420a027402ea8077a6810a4be4c42e7bc49fede70ccbe95444f4717f34d9db8cf8ca8")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x12f8e50885066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa847465737450f847f8458207f6a09aa476d7c290c0023e2b500005d31c7fda81df6fd803fd7c613539dc6e6ee420a027402ea8077a6810a4be4c42e7bc49fede70ccbe95444f4717f34d9db8cf8ca89437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a0a51d1107326fb4443f069e09d43bc991496c9f378d2a6002110a75fb93a478c8a00c317a9e36fe3b260d1ca5a717d6f5847b1ba326229f83580c2a82e00f40a1e8")
    })


    test("signTransaction test FeeDelegatedSmartContractDeploy", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedSmartContractDeploy,
                chainId:1001,
                from: sender.address,
                nonce:9,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                data:"0x608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c0033000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000004555344540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000",
                gasLimit:2000000,
                gasPrice:27500000000,
                humanReadable: false,
                codeFormat: 0,
            }
        })
        expect(senderTx).toEqual("0x29f91ab10985066720b300831e848080809469c8c960bc3963be9df92e26206304d647b625fab91a41608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c00330000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000455534454000000000000000000000000000000000000000000000000000000008080f847f8458207f6a0391b25c67decabbfdd84673920ad137cb42805b6176d1a48f2978890b5b9b8c0a056d39bbc3d4341db596ef61ada74453a1df0f989160942851d88254e30728762")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x29f91b0f0985066720b300831e848080809469c8c960bc3963be9df92e26206304d647b625fab91a41608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c00330000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000455534454000000000000000000000000000000000000000000000000000000008080f847f8458207f6a0391b25c67decabbfdd84673920ad137cb42805b6176d1a48f2978890b5b9b8c0a056d39bbc3d4341db596ef61ada74453a1df0f989160942851d88254e307287629437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f6a008329fd8ee0189ddddff9e7b6b6fad03b3ca02c5aa7997586b304f9c45409c22a06e03ea5ea77a63444cbb4521e662b1cd2b93197ea2d0734f6a2b161066fb953c")
    })


    test("signTransaction test FeeDelegatedAccountUpdate", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedAccountUpdate,
                chainId:1001,
                from: sender.address,
                nonce:12,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                gasLimit:2000000,
                gasPrice:27500000000,
                key: { type: AccountKeyType.Public, key: "0x0333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f1" },
            }
        })

        expect(senderTx).toEqual("0x21f88d0c85066720b300831e84809469c8c960bc3963be9df92e26206304d647b625faa302a10333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f1f847f8458207f6a087c890b0993f6646a2f019cea8659a1e6cf39cc2b2344345ee7d7a94b953c870a03c6523b6cae3d6b4347cc105eb3cf4be15f28534ad7923a8bc3e6bb58cc9e380")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x21f8eb0c85066720b300831e84809469c8c960bc3963be9df92e26206304d647b625faa302a10333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f1f847f8458207f6a087c890b0993f6646a2f019cea8659a1e6cf39cc2b2344345ee7d7a94b953c870a03c6523b6cae3d6b4347cc105eb3cf4be15f28534ad7923a8bc3e6bb58cc9e3809437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a0e7397d5a1c9f5efa7b741d9c01ba9883a9c8c9f4bb447856e4af1a4453d7bebda028e55c5141160680e1951f2c2df52d0b3b3cb7a24c4a0b9e6826fc9fbc1b6e84")
    })

    test("signTransaction test FeeDelegatedAccountUpdateWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedAccountUpdateWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:13,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                gasLimit:2000000,
                gasPrice:27500000000,
                key: { type: AccountKeyType.Public, key: "0x0333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f1" },
                feeRatio:80
            }
        })

        expect(senderTx).toEqual("0x22f88e0d85066720b300831e84809469c8c960bc3963be9df92e26206304d647b625faa302a10333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f150f847f8458207f6a01c5f950aaf6903e64076f51a27f4dfd2632f9272a9606de45d4aed190ba8f867a04b90860c1fb28390abfbd6820bdce70acceba7d99b701c31c691267f25e0327d")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x22f8ec0d85066720b300831e84809469c8c960bc3963be9df92e26206304d647b625faa302a10333c62835b8ecd6e74dd4cdfeacdf13b501cb2f2edccf7b4139f9cdb882ffd2f150f847f8458207f6a01c5f950aaf6903e64076f51a27f4dfd2632f9272a9606de45d4aed190ba8f867a04b90860c1fb28390abfbd6820bdce70acceba7d99b701c31c691267f25e0327d9437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a0a8c72ea5145b46bc8d23d61c40cc6e80fdce3e451f5f44e239735f4cb216d734a04eaa372138b7e6d26b7eb2209e3a8ec8c12d6f436638202ac5307d9b9f71623c")
    })


    test("signTransaction test FeeDelegatedSmartContractDeployWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        expect(sender.address).toEqual("0x69C8c960bc3963BE9DF92e26206304d647b625fa")
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        expect(feePayer.address).toEqual("0x37Fb996d96633C5BCF526f3dc198285C9Dac846f")
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedSmartContractDeployWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:11,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                data:"0x608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c0033000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000004555344540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000",
                gasLimit:2000000,
                gasPrice:27500000000,
                humanReadable: false,
                codeFormat: 0,
                feeRatio:80,
            }
        })


        expect(senderTx).toEqual("0x2af91ab20b85066720b300831e848080809469c8c960bc3963be9df92e26206304d647b625fab91a41608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c0033000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000004555344540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000805080f847f8458207f6a0364c98092eab1e3b7ba07de95cd360e20a23a1b26b4ce9b5c4cd7bfd714f3540a0380e526af44fb6206dce1b67b025e4e4c11b288e4de2ab2c2466e8c6d735e57a")
        //feePayer sign
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                feePayer: feePayer.address,
                senderRawTx: senderTx,
            }
        })

        expect(signedTx).toEqual("0x2af91b100b85066720b300831e848080809469c8c960bc3963be9df92e26206304d647b625fab91a41608060405234801561000f575f5ffd5b5060405161198138038061198183398181016040528101906100319190610485565b81818160039081610042919061070b565b508060049081610052919061070b565b50505061008b3361006761009260201b60201c565b600a6100739190610942565b612710610080919061098c565b61009a60201b60201c565b5050610ab5565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361010a575f6040517fec442f050000000000000000000000000000000000000000000000000000000081526004016101019190610a0c565b60405180910390fd5b61011b5f838361011f60201b60201c565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361016f578060025f8282546101639190610a25565b9250508190555061023d565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050818110156101f8578381836040517fe450d38c0000000000000000000000000000000000000000000000000000000081526004016101ef93929190610a67565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610284578060025f82825403925050819055506102ce565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405161032b9190610a9c565b60405180910390a3505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61039782610351565b810181811067ffffffffffffffff821117156103b6576103b5610361565b5b80604052505050565b5f6103c8610338565b90506103d4828261038e565b919050565b5f67ffffffffffffffff8211156103f3576103f2610361565b5b6103fc82610351565b9050602081019050919050565b8281835e5f83830152505050565b5f610429610424846103d9565b6103bf565b9050828152602081018484840111156104455761044461034d565b5b610450848285610409565b509392505050565b5f82601f83011261046c5761046b610349565b5b815161047c848260208601610417565b91505092915050565b5f5f6040838503121561049b5761049a610341565b5b5f83015167ffffffffffffffff8111156104b8576104b7610345565b5b6104c485828601610458565b925050602083015167ffffffffffffffff8111156104e5576104e4610345565b5b6104f185828601610458565b9150509250929050565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061054957607f821691505b60208210810361055c5761055b610505565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105be7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610583565b6105c88683610583565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61060c610607610602846105e0565b6105e9565b6105e0565b9050919050565b5f819050919050565b610625836105f2565b61063961063182610613565b84845461058f565b825550505050565b5f5f905090565b610650610641565b61065b81848461061c565b505050565b5b8181101561067e576106735f82610648565b600181019050610661565b5050565b601f8211156106c35761069481610562565b61069d84610574565b810160208510156106ac578190505b6106c06106b885610574565b830182610660565b50505b505050565b5f82821c905092915050565b5f6106e35f19846008026106c8565b1980831691505092915050565b5f6106fb83836106d4565b9150826002028217905092915050565b610714826104fb565b67ffffffffffffffff81111561072d5761072c610361565b5b6107378254610532565b610742828285610682565b5f60209050601f831160018114610773575f8415610761578287015190505b61076b85826106f0565b8655506107d2565b601f19841661078186610562565b5f5b828110156107a857848901518255600182019150602085019450602081019050610783565b868310156107c557848901516107c1601f8916826106d4565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561085c57808604811115610838576108376107da565b5b60018516156108475780820291505b808102905061085585610807565b945061081c565b94509492505050565b5f82610874576001905061092f565b81610881575f905061092f565b816001811461089757600281146108a1576108d0565b600191505061092f565b60ff8411156108b3576108b26107da565b5b8360020a9150848211156108ca576108c96107da565b5b5061092f565b5060208310610133831016604e8410600b84101617156109055782820a905083811115610900576108ff6107da565b5b61092f565b6109128484846001610813565b92509050818404811115610929576109286107da565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61094c826105e0565b915061095783610936565b92506109847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610865565b905092915050565b5f610996826105e0565b91506109a1836105e0565b92508282026109af816105e0565b915082820484148315176109c6576109c56107da565b5b5092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6109f6826109cd565b9050919050565b610a06816109ec565b82525050565b5f602082019050610a1f5f8301846109fd565b92915050565b5f610a2f826105e0565b9150610a3a836105e0565b9250828201905080821115610a5257610a516107da565b5b92915050565b610a61816105e0565b82525050565b5f606082019050610a7a5f8301866109fd565b610a876020830185610a58565b610a946040830184610a58565b949350505050565b5f602082019050610aaf5f830184610a58565b92915050565b610ebf80610ac25f395ff3fe608060405234801561000f575f5ffd5b506004361061009c575f3560e01c806370a082311161006457806370a082311461015a57806395d89b411461018a578063a0712d68146101a8578063a9059cbb146101c4578063dd62ed3e146101f45761009c565b806306fdde03146100a0578063095ea7b3146100be57806318160ddd146100ee57806323b872dd1461010c578063313ce5671461013c575b5f5ffd5b6100a8610224565b6040516100b59190610b0d565b60405180910390f35b6100d860048036038101906100d39190610bbe565b6102b4565b6040516100e59190610c16565b60405180910390f35b6100f66102d6565b6040516101039190610c3e565b60405180910390f35b61012660048036038101906101219190610c57565b6102df565b6040516101339190610c16565b60405180910390f35b61014461030d565b6040516101519190610cc2565b60405180910390f35b610174600480360381019061016f9190610cdb565b610315565b6040516101819190610c3e565b60405180910390f35b61019261035a565b60405161019f9190610b0d565b60405180910390f35b6101c260048036038101906101bd9190610d06565b6103ea565b005b6101de60048036038101906101d99190610bbe565b6103f7565b6040516101eb9190610c16565b60405180910390f35b61020e60048036038101906102099190610d31565b610419565b60405161021b9190610c3e565b60405180910390f35b60606003805461023390610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461025f90610d9c565b80156102aa5780601f10610281576101008083540402835291602001916102aa565b820191905f5260205f20905b81548152906001019060200180831161028d57829003601f168201915b5050505050905090565b5f5f6102be61049b565b90506102cb8185856104a2565b600191505092915050565b5f600254905090565b5f5f6102e961049b565b90506102f68582856104b4565b610301858585610546565b60019150509392505050565b5f6012905090565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60606004805461036990610d9c565b80601f016020809104026020016040519081016040528092919081815260200182805461039590610d9c565b80156103e05780601f106103b7576101008083540402835291602001916103e0565b820191905f5260205f20905b8154815290600101906020018083116103c357829003601f168201915b5050505050905090565b6103f43382610636565b50565b5f5f61040161049b565b905061040e818585610546565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b5f33905090565b6104af83838360016106b5565b505050565b5f6104bf8484610419565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146105405781811015610531578281836040517ffb8f41b200000000000000000000000000000000000000000000000000000000815260040161052893929190610ddb565b60405180910390fd5b61053f84848484035f6106b5565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036105b6575f6040517f96c6fd1e0000000000000000000000000000000000000000000000000000000081526004016105ad9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610626575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161061d9190610e10565b60405180910390fd5b610631838383610884565b505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036106a6575f6040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161069d9190610e10565b60405180910390fd5b6106b15f8383610884565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610725575f6040517fe602df0500000000000000000000000000000000000000000000000000000000815260040161071c9190610e10565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610795575f6040517f94280d6200000000000000000000000000000000000000000000000000000000815260040161078c9190610e10565b60405180910390fd5b8160015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550801561087e578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040516108759190610c3e565b60405180910390a35b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108d4578060025f8282546108c89190610e56565b925050819055506109a2565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205490508181101561095d578381836040517fe450d38c00000000000000000000000000000000000000000000000000000000815260040161095493929190610ddb565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109e9578060025f8282540392505081905550610a33565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610a909190610c3e565b60405180910390a3505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610adf82610a9d565b610ae98185610aa7565b9350610af9818560208601610ab7565b610b0281610ac5565b840191505092915050565b5f6020820190508181035f830152610b258184610ad5565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610b5a82610b31565b9050919050565b610b6a81610b50565b8114610b74575f5ffd5b50565b5f81359050610b8581610b61565b92915050565b5f819050919050565b610b9d81610b8b565b8114610ba7575f5ffd5b50565b5f81359050610bb881610b94565b92915050565b5f5f60408385031215610bd457610bd3610b2d565b5b5f610be185828601610b77565b9250506020610bf285828601610baa565b9150509250929050565b5f8115159050919050565b610c1081610bfc565b82525050565b5f602082019050610c295f830184610c07565b92915050565b610c3881610b8b565b82525050565b5f602082019050610c515f830184610c2f565b92915050565b5f5f5f60608486031215610c6e57610c6d610b2d565b5b5f610c7b86828701610b77565b9350506020610c8c86828701610b77565b9250506040610c9d86828701610baa565b9150509250925092565b5f60ff82169050919050565b610cbc81610ca7565b82525050565b5f602082019050610cd55f830184610cb3565b92915050565b5f60208284031215610cf057610cef610b2d565b5b5f610cfd84828501610b77565b91505092915050565b5f60208284031215610d1b57610d1a610b2d565b5b5f610d2884828501610baa565b91505092915050565b5f5f60408385031215610d4757610d46610b2d565b5b5f610d5485828601610b77565b9250506020610d6585828601610b77565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610db357607f821691505b602082108103610dc657610dc5610d6f565b5b50919050565b610dd581610b50565b82525050565b5f606082019050610dee5f830186610dcc565b610dfb6020830185610c2f565b610e086040830184610c2f565b949350505050565b5f602082019050610e235f830184610dcc565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610e6082610b8b565b9150610e6b83610b8b565b9250828201905080821115610e8357610e82610e29565b5b9291505056fea26469706673582212205a177dfc138600d2fcb04cc530dc667a15b9bbb7c2b4c44ae150cc34debb553964736f6c634300081c0033000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000004555344540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045553445400000000000000000000000000000000000000000000000000000000805080f847f8458207f6a0364c98092eab1e3b7ba07de95cd360e20a23a1b26b4ce9b5c4cd7bfd714f3540a0380e526af44fb6206dce1b67b025e4e4c11b288e4de2ab2c2466e8c6d735e57a9437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f6a0898c81f92c2a58e15029a97332b5511078cb8ef4e40e6165614c4eb22ac78bb1a051064e7b6158fc55f8646c5a0415e2fab4a2ebfb2c899b5d973d4cb8b0ef9a62")
    })

    test("signTransaction test FeeDelegatedValueTransferWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        //sender build tx and sign
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedValueTransferWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:3,
                to: "0x5275a3E2F2E1eE512D29bD6e62aa59AFfc8d04E6",
                value: "1234",
                gasLimit:2000000,
                gasPrice:27500000000,
                feeRatio:10,
            }
        })
        expect(senderTx).toEqual("0x0af8820385066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa0af847f8458207f6a0b1e2ce94727be6244ac32dd9c7e4ae35fed2b92d8cf16f5914ccd1ba658b573da05f7f703039d938b811d3e44b928f979d077c3195a86a253700b609e3def56d20")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x0af8e00385066720b300831e8480945275a3e2f2e1ee512d29bd6e62aa59affc8d04e68204d29469c8c960bc3963be9df92e26206304d647b625fa0af847f8458207f6a0b1e2ce94727be6244ac32dd9c7e4ae35fed2b92d8cf16f5914ccd1ba658b573da05f7f703039d938b811d3e44b928f979d077c3195a86a253700b609e3def56d209437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a02c3acf9d4febe342ae3d4a43ca4719fa84eeb9439c1ee0fa05ed84ebba991324a0787e42636765bef5fb6b51c7e0d8fa572adc34fe9761e8097ef314ce76924858")
    })


    test("signTransaction test FeeDelegatedSmartContractExecution", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedSmartContractExecution,
                chainId:1001,
                from: sender.address,
                nonce:2,
                to: "0x36F454B5E61a1ED0886784feB6D1e9bFf616d7b4",
                data:"0xa0712d68000000000000000000000000000000000000000000000000000000000001e240",
                value: "0",
                gasLimit:2000000,
                gasPrice:27500000000
            }
        })
        expect(senderTx).toEqual("0x31f8a40285066720b300831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b4809469c8c960bc3963be9df92e26206304d647b625faa4a0712d68000000000000000000000000000000000000000000000000000000000001e240f847f8458207f6a0eb2d7a8e76b2a6e3ef88541daa0c094d98778bd9c190d367b428988def1ab46da035d453e55fcbc2d4c0ea8c708db5d1504be829c6f28da79dd0cd398bef3aafb8")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x31f901020285066720b300831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b4809469c8c960bc3963be9df92e26206304d647b625faa4a0712d68000000000000000000000000000000000000000000000000000000000001e240f847f8458207f6a0eb2d7a8e76b2a6e3ef88541daa0c094d98778bd9c190d367b428988def1ab46da035d453e55fcbc2d4c0ea8c708db5d1504be829c6f28da79dd0cd398bef3aafb89437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f5a08a60c07cf1d13e8a1759baca0d3a898269fff8538c2b711ab247a7d7d2fa2dcea032dfbd7994af1ded0cb49fa1b324175cc45139afee2cb7bac8e36ba45b02d108")
    })

    test("signTransaction test FeeDelegatedSmartContractExecutionWithRatio", async () => {
        const wallet = new KaiaWallet();
        const senderPrivateKey = "0xf5c8f8b725a47cffc33de30a0bb9dd48d47601b615a650d5a41636277f52bbd7";
        const sender = await wallet.getNewAddress({privateKey:senderPrivateKey})
        const feePayerPrivateKey = "0xae2cc5a2953d6650b936329fa34e66340e81642f573846016cb874ec0465314f"
        const feePayer = await wallet.getNewAddress({privateKey:feePayerPrivateKey})
        let senderTx= await wallet.signTransaction({
            privateKey:senderPrivateKey,
            data:{
                kaiaTxType:TxType.FeeDelegatedSmartContractExecutionWithRatio,
                chainId:1001,
                from: sender.address,
                nonce:5,
                to: "0x36F454B5E61a1ED0886784feB6D1e9bFf616d7b4",
                data:"0xa0712d68000000000000000000000000000000000000000000000000000000000001e240",
                value: "0",
                gasLimit:2000000,
                gasPrice:27500000000,
                feeRatio:10,
            }
        })
        expect(senderTx).toEqual("0x32f8a50585066720b300831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b4809469c8c960bc3963be9df92e26206304d647b625faa4a0712d68000000000000000000000000000000000000000000000000000000000001e2400af847f8458207f6a0c31546549dbf61d1cf93c9c1089896f7edba7e77747bd4f77bf12e46dfd19363a017b8a94694a3ce5abecc24fcfb6e1e66150815e6cf5241de52aafbf7339b72f8")
        let signedTx = await wallet.signTransaction({
            privateKey:feePayerPrivateKey,
            data:{
                senderRawTx: senderTx,
            }
        })
        expect(signedTx).toEqual("0x32f901030585066720b300831e84809436f454b5e61a1ed0886784feb6d1e9bff616d7b4809469c8c960bc3963be9df92e26206304d647b625faa4a0712d68000000000000000000000000000000000000000000000000000000000001e2400af847f8458207f6a0c31546549dbf61d1cf93c9c1089896f7edba7e77747bd4f77bf12e46dfd19363a017b8a94694a3ce5abecc24fcfb6e1e66150815e6cf5241de52aafbf7339b72f89437fb996d96633c5bcf526f3dc198285c9dac846ff847f8458207f6a0e818835fbe10c1cb738fed6eb5d6911b68c812f746e73c70b32caa80fe3c123fa010f44746060d28baaee1ac4bfd1e7cf9739b724f1d058e3141c0dbd8af48214f")
    })
})